p8105_hw2_xc2784
================
2025-10-01

``` r
library(tidyverse)
```

    ## ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
    ## ✔ dplyr     1.1.4     ✔ readr     2.1.5
    ## ✔ forcats   1.0.0     ✔ stringr   1.5.1
    ## ✔ ggplot2   3.5.2     ✔ tibble    3.3.0
    ## ✔ lubridate 1.9.4     ✔ tidyr     1.3.1
    ## ✔ purrr     1.1.0     
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()
    ## ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors

## Problem 1

First, clean the data in pols-month.csv

``` r
pols_df = read_csv(file = "./fivethirtyeight_datasets/pols-month.csv",show_col_types = FALSE) %>% 
  janitor::clean_names() %>% 
  separate(mon, into = c("year","month","day"), sep = "-") %>% 
  mutate(year = as.integer(year), 
         month = month.abb[as.integer(month)],
         president = case_when(
      prez_gop == 1 ~ "gop",
      prez_dem == 1 ~ "dem"
    )) %>%
  select(-day,-prez_gop,-prez_dem)
```

Second, clean the data in snp.csv

``` r
snp_df = read_csv(file = "./fivethirtyeight_datasets/snp.csv",show_col_types = FALSE) %>% 
  janitor::clean_names() %>% 
  separate(date, into = c("month","day","year"), sep = "/") %>% 
  mutate(month = month.abb[as.integer(month)],
         year = as.integer(year),  
         year = ifelse(year < 30, year + 2000, year + 1900)) %>% 
  select(year, month, everything())
```

Third, tidy the unemployment data

``` r
unemployment_df = read_csv(file = "./fivethirtyeight_datasets/unemployment.csv", show_col_types = FALSE) %>% 
  pivot_longer(Jan:Dec,names_to = "month",values_to = "unemployment") %>%
  janitor::clean_names() 
```

Join the datasets by merging snp into pols, and merging unemployment
into the result.

``` r
result_df = left_join(pols_df,snp_df, by = c("year","month")) %>% 
  left_join(unemployment_df, by = c("year","month"))
colnames(result_df)
```

    ##  [1] "year"         "month"        "gov_gop"      "sen_gop"      "rep_gop"     
    ##  [6] "gov_dem"      "sen_dem"      "rep_dem"      "president"    "day"         
    ## [11] "close"        "unemployment"

pols contains information about the number of national politicians who
are democratic or republican from 1947 to 2015. snp contains information
about the closing values of the S&P stock index on the associated date,
from 1950 to 2015. unemployment contains information about percentage of
unemployment in the month, from 1948 to 2015. The final resulting
dataset has 822 entries and 12 total columns, with year from 1947 to
2015. Key variable names: “year” “month” “gov_gop” “sen_gop” “rep_gop”
“gov_dem” “sen_dem” “rep_dem” “president” “day” “close” “unemployment”

## Problem 2

``` r
library(readxl)
```

Read and clean the 3 Trash Wheel sheet

``` r
mr_df = read_excel("./202509 Trash Wheel Collection Data.xlsx",sheet = "Mr. Trash Wheel",
                   range = "A2:N709",col_names = TRUE) %>% 
  janitor::clean_names() %>% 
  filter(!is.na(dumpster)) %>%
  mutate(year = as.integer(year),sports_balls = as.integer(round(sports_balls, 0)),trash_wheel="Mr. Trash Wheel")
```

Read and clean the Professor Trash Wheel

``` r
professor_df = read_excel("./202509 Trash Wheel Collection Data.xlsx",sheet = "Professor Trash Wheel",
                   range = "A2:M134",col_names = TRUE) %>% 
  janitor::clean_names() %>% 
  filter(!is.na(dumpster)) %>% 
  mutate(year = as.integer(year), trash_wheel="Professor Trash Wheel")
```

Read and clean the Gwynns Falls Trash Wheel

``` r
gwynns_df = read_excel("./202509 Trash Wheel Collection Data.xlsx",sheet = "Gwynns Falls Trash Wheel",
                   range = "A2:L351",col_names = TRUE) %>% 
  janitor::clean_names() %>% 
  filter(!is.na(dumpster)) %>% 
  mutate(year = as.integer(year), trash_wheel = "Gwynns Falls Trash Wheel")
```

Bind 3 datasets

``` r
ts_final = 
  bind_rows(mr_df, professor_df, gwynns_df) %>% 
  janitor::clean_names() %>% 
  select(trash_wheel, everything())
colnames(ts_final)
```

    ##  [1] "trash_wheel"        "dumpster"           "month"             
    ##  [4] "year"               "date"               "weight_tons"       
    ##  [7] "volume_cubic_yards" "plastic_bottles"    "polystyrene"       
    ## [10] "cigarette_butts"    "glass_bottles"      "plastic_bags"      
    ## [13] "wrappers"           "sports_balls"       "homes_powered"

The Trash Wheel dataset provides a record of the waste collected by
different trash wheels in Baltimore. The resulting dataset has 1,188
observations and 15 total columns.The key variables include
“trash_wheel” “dumpster” “month” “year” “date” “weight_tons”
“volume_cubic_yards” “plastic_bottles” “polystyrene” “cigarette_butts”
“glass_bottles” “plastic_bags” “wrappers” “sports_balls” “homes_powered”
.

For the available data, Professor Trash Wheel has collected a total of
282.26 tons of trash. Gwynnda collected 1.812^{4} cigarette butts in
June 2022.
